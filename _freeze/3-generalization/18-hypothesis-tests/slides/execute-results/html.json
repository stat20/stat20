{
  "hash": "f9ecf6212a11381a8c7cae5c56466a39",
  "result": {
    "markdown": "---\ntitle: \"Hypothesis Testing\"\nformat:\n  revealjs:\n    author: \"STAT 20: Introduction to Probability and Statistics\"\n    height: 900\n    width: 1600\n    theme: ../../assets/slides.scss\n    multiplex: false\n    transition: fade\n    slide-number: c\n    incremental: false\n    center: false\n    menu: false\n    highlight-style: github\n    progress: false\n    code-overflow: wrap\n    title-slide-attributes:\n      data-background-image: ../../assets/stat20-hex-bg.png\n      data-background-size: contain\nexecute: \n  echo: true\n---\n\n\n## Agenda\n\n- Pick a Card\n- Concept Questions\n- Hypothesis Testing with `infer`\n- Practice Problems\n\n:::notes\nPick a Card Activity\n\nGoals:\n1. Identify a situation where people naturally reason like a hypothesis test\n2. Map the parts of that situation to the formalism of a hypothesis test\n3. Provide some intuition about why .05 is used as the standard threshold\n\nTake two decks of cards and mix them so that you have a single deck that is all of one color, say: black. Bring a prize to class and ham it up that the winner of this simple game will win the prize. All they have to do is pick a red card.\n\nShuffle the deck, say that's its fair, then select a random student to be the first contestant. Fan the cards out for them and have them pick a card. When the lose, fein disappointment / surprise, replace the card and move on to the next student. Do this several times. You'll start hearing groans that the game is rigged. At the point where the groans become clearly articulated (usually around 4 or 5 draws), stop the game, admit to the scam, then go to the board.\n\nWalk through how students started with a previous notion that the deck was fair (null hypothesis: p(red) = .5). As they observed data, they assessed the degree of consistency with that notion by computing the probability of the data. Calculate a table of the binomial probabilities of one black, two blacks, three blacks, on the board. With 4 blacks, the probability is 1/2^4 = .0625 and with 5 blacks its 1/2^5 = .03125. Draw a line between these two probability and identify it as the alpha = .05 threshold that is generally used for \"calling bullshit on the null\".\n:::\n\n# Concept Question\n\n## {.smaller}\n\n:::poll\n\nWhich of the following statements below represents claims that correspond to a null hypothesis (as opposed to an alternative hypothesis)?\n\nHint: try to write them using parameters (statements about means / proportions / etc)\n\nA. King cheetahs on average run the same speed as standard spotted cheetahs.\n\nB. For a particular student, the probability of correctly answering a 5-option multiple choice test is larger than 0.2 (i.e., better than guessing).\n\nC. The mean length of African elephant tusks has changed over the last 100 years.\n\nD. The risk of facial clefts is equal for babies born to mothers who take folic acid supplements compared with those from mothers who do not.\n\nE. Mean birth weight of newborns is dependent on caffeine intake during pregnancy.\n\nF. The probability of getting in a car accident is the same if using a cell phone than if not using a cell phone.\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_74c265ba\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n\n:::notes\nCorrect answers: A, D, F.\n\nMost of these they haven't seen examples of, so it will be worth laying out the null hypotheses.\n:::\n\n## \n\nWe want to understand whether blood thinners are helpful or harmful. We’ll consider both of these possibilities using a two-sided hypothesis test.\n\n*Null*: Blood thinners do not have an overall survival effect, i.e., the survival proportions are the same in each group. \n\n*Alternative*: Blood thinners have an impact on survival, either positive or negative, but not zero.\n\n![](images/two-sided.png){fig-width=\"400\" fig-align=\"center\"}\n\n:::poll\nWhat is your guess at the p-value?\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_e5df5601\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n:::notes\n.3 is probably the best answer but .2 is ok too.\n:::\n\n\n# Hypothesis Testing with `infer`\n\n\n## {background-image=\"images/pic-5.jpg\" background-size=\"contain\"}\n\n## {background-image=\"images/pic-6.jpg\" background-size=\"contain\"}\n\n## {background-image=\"images/pic-7.jpg\" background-size=\"contain\"}\n\n## {background-image=\"images/pic-8.jpg\" background-size=\"contain\"}\n\n## {background-image=\"images/pic-9.jpg\" background-size=\"contain\"}\n\n## {background-image=\"images/pic-10.jpg\" background-size=\"contain\"}\n\n## {background-image=\"images/pic-11.jpg\" background-size=\"contain\"}\n\n## {background-image=\"images/pic-12.jpg\" background-size=\"contain\"}\n\n\n# Example: Class Survey\n\n## {menu-title=\"question\"}\n\n> Question: Do beach lovers prefer the warm seasons more than mountain lovers?\n\n. . .\n\nLoad packages and data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(stat20data)\n```\n:::\n\n\n. . .\n\nCreate new column with just two levels and drop NAs.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_survey <- class_survey %>%\n  mutate(warm_fav = season%in% c(\"Summer\", \"Fall\")) %>%\n  drop_na(beach_or_mtns, warm_fav)\n```\n:::\n\n\n\n## Visualizing the data\n\n> What sort of visualization can we use to see the association between these two variables?\n\n. . .\n\n:::columns\n:::{.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_survey %>%\n  select(beach_or_mtns, warm_fav)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 619 × 2\n   beach_or_mtns    warm_fav\n   <chr>            <lgl>   \n 1 At the beach     TRUE    \n 2 At the beach     TRUE    \n 3 In the mountains FALSE   \n 4 At the beach     TRUE    \n 5 In the mountains FALSE   \n 6 At the beach     TRUE    \n 7 In the mountains FALSE   \n 8 At the beach     FALSE   \n 9 At the beach     FALSE   \n10 At the beach     TRUE    \n# … with 609 more rows\n```\n:::\n:::\n\n:::\n\n:::{.column width=\"50%\" .fragment}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(class_survey, aes(x = beach_or_mtns,\n                         fill = warm_fav)) +\n  geom_bar(position = \"fill\")\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n:::\n:::\n\n\n## Answering with a statistic\n\n> Question: Do beach lovers prefer the warm seasons more than mountain lovers?\n\n. . .\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(infer)\nobs_stat <- class_survey %>%\n  specify(response = warm_fav,\n          explanatory = beach_or_mtns,\n          success = \"TRUE\") %>%\n  calculate(stat = \"diff in props\")\nobs_stat\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: warm_fav (factor)\nExplanatory: beach_or_mtns (factor)\n# A tibble: 1 × 1\n   stat\n  <dbl>\n1 0.231\n```\n:::\n:::\n\n\n. . .\n\n> We see the difference is non-zero, but could that just be a product of this particular small sample of data that we have?\n\n\n## Hypothesis Test Pipeline {auto-animate=\"true\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_survey %>%\n  specify(response = warm_fav,  \n          explanatory = beach_or_mtns,  \n          success = \"TRUE\")  \n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: warm_fav (factor)\nExplanatory: beach_or_mtns (factor)\n# A tibble: 619 × 2\n   warm_fav beach_or_mtns   \n   <fct>    <fct>           \n 1 TRUE     At the beach    \n 2 TRUE     At the beach    \n 3 FALSE    In the mountains\n 4 TRUE     At the beach    \n 5 FALSE    In the mountains\n 6 TRUE     At the beach    \n 7 FALSE    In the mountains\n 8 FALSE    At the beach    \n 9 FALSE    At the beach    \n10 TRUE     At the beach    \n# … with 609 more rows\n```\n:::\n:::\n\n\n\n## Hypothesis Test Pipeline {auto-animate=\"true\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_survey %>%\n  specify(response = warm_fav,\n          explanatory = beach_or_mtns,\n          success = \"TRUE\") %>%\n  hypothesize(null = \"independence\")  \n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: warm_fav (factor)\nExplanatory: beach_or_mtns (factor)\nNull Hypothesis: independence\n# A tibble: 619 × 2\n   warm_fav beach_or_mtns   \n   <fct>    <fct>           \n 1 TRUE     At the beach    \n 2 TRUE     At the beach    \n 3 FALSE    In the mountains\n 4 TRUE     At the beach    \n 5 FALSE    In the mountains\n 6 TRUE     At the beach    \n 7 FALSE    In the mountains\n 8 FALSE    At the beach    \n 9 FALSE    At the beach    \n10 TRUE     At the beach    \n# … with 609 more rows\n```\n:::\n:::\n\n\n\n## Hypothesis Test Pipeline {auto-animate=\"true\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_survey %>%\n  specify(response = warm_fav,\n          explanatory = beach_or_mtns,\n          success = \"TRUE\") %>%\n  hypothesize(null = \"independence\") %>%\n  generate(reps = 1,\n           type = \"permute\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: warm_fav (factor)\nExplanatory: beach_or_mtns (factor)\nNull Hypothesis: independence\n# A tibble: 619 × 3\n# Groups:   replicate [1]\n   warm_fav beach_or_mtns    replicate\n   <fct>    <fct>                <int>\n 1 TRUE     At the beach             1\n 2 TRUE     At the beach             1\n 3 FALSE    In the mountains         1\n 4 TRUE     At the beach             1\n 5 FALSE    In the mountains         1\n 6 FALSE    At the beach             1\n 7 FALSE    In the mountains         1\n 8 TRUE     At the beach             1\n 9 FALSE    At the beach             1\n10 TRUE     At the beach             1\n# … with 609 more rows\n```\n:::\n:::\n\n\n\n\n## Hypothesis Test Pipeline {auto-animate=\"true\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_survey %>%\n  specify(response = warm_fav,\n          explanatory = beach_or_mtns,\n          success = \"TRUE\") %>%\n  hypothesize(null = \"independence\") %>%\n  generate(reps = 1,\n           type = \"permute\") # a second shuffle\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: warm_fav (factor)\nExplanatory: beach_or_mtns (factor)\nNull Hypothesis: independence\n# A tibble: 619 × 3\n# Groups:   replicate [1]\n   warm_fav beach_or_mtns    replicate\n   <fct>    <fct>                <int>\n 1 TRUE     At the beach             1\n 2 TRUE     At the beach             1\n 3 FALSE    In the mountains         1\n 4 FALSE    At the beach             1\n 5 TRUE     In the mountains         1\n 6 TRUE     At the beach             1\n 7 TRUE     In the mountains         1\n 8 TRUE     At the beach             1\n 9 FALSE    At the beach             1\n10 TRUE     At the beach             1\n# … with 609 more rows\n```\n:::\n:::\n\n\n\n## Hypothesis Test Pipeline {auto-animate=\"true\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_survey %>%\n  specify(response = warm_fav,\n          explanatory = beach_or_mtns,\n          success = \"TRUE\") %>%\n  hypothesize(null = \"independence\") %>%\n  generate(reps = 1,\n           type = \"permute\") # a third shuffle\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: warm_fav (factor)\nExplanatory: beach_or_mtns (factor)\nNull Hypothesis: independence\n# A tibble: 619 × 3\n# Groups:   replicate [1]\n   warm_fav beach_or_mtns    replicate\n   <fct>    <fct>                <int>\n 1 TRUE     At the beach             1\n 2 FALSE    At the beach             1\n 3 FALSE    In the mountains         1\n 4 TRUE     At the beach             1\n 5 TRUE     In the mountains         1\n 6 FALSE    At the beach             1\n 7 TRUE     In the mountains         1\n 8 FALSE    At the beach             1\n 9 FALSE    At the beach             1\n10 FALSE    At the beach             1\n# … with 609 more rows\n```\n:::\n:::\n\n\n\n## Hypothesis Test Pipeline {auto-animate=\"true\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_survey %>%\n  specify(response = warm_fav,\n          explanatory = beach_or_mtns,\n          success = \"TRUE\") %>%\n  hypothesize(null = \"independence\") %>%\n  generate(reps = 500,  \n           type = \"permute\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: warm_fav (factor)\nExplanatory: beach_or_mtns (factor)\nNull Hypothesis: independence\n# A tibble: 309,500 × 3\n# Groups:   replicate [500]\n   warm_fav beach_or_mtns    replicate\n   <fct>    <fct>                <int>\n 1 FALSE    At the beach             1\n 2 TRUE     At the beach             1\n 3 FALSE    In the mountains         1\n 4 TRUE     At the beach             1\n 5 TRUE     In the mountains         1\n 6 TRUE     At the beach             1\n 7 FALSE    In the mountains         1\n 8 FALSE    At the beach             1\n 9 FALSE    At the beach             1\n10 TRUE     At the beach             1\n# … with 309,490 more rows\n```\n:::\n:::\n\n\n\n## Hypothesis Test Pipeline {auto-animate=\"true\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_survey %>%\n  specify(response = warm_fav,\n          explanatory = beach_or_mtns,\n          success = \"TRUE\") %>%\n  hypothesize(null = \"independence\") %>%\n  generate(reps = 500,\n           type = \"permute\") %>%\n  calculate(stat = \"diff in props\")  \n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: warm_fav (factor)\nExplanatory: beach_or_mtns (factor)\nNull Hypothesis: independence\n# A tibble: 500 × 2\n   replicate     stat\n       <int>    <dbl>\n 1         1  0.0679 \n 2         2  0.0324 \n 3         3  0.0182 \n 4         4 -0.0103 \n 5         5 -0.0245 \n 6         6 -0.0103 \n 7         7 -0.00317\n 8         8  0.0395 \n 9         9 -0.0245 \n10        10 -0.0245 \n# … with 490 more rows\n```\n:::\n:::\n\n\n\n## Hypothesis Test Pipeline {auto-animate=\"true\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_survey %>%\n  specify(response = warm_fav,\n          explanatory = beach_or_mtns,\n          success = \"TRUE\") %>%\n  hypothesize(null = \"independence\") %>%\n  generate(reps = 500,\n           type = \"permute\") %>%\n  calculate(stat = \"diff in props\") %>%\n  visualize()  \n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-15-1.png){width=960}\n:::\n:::\n\n\n\n## Hypothesis Test Pipeline {auto-animate=\"true\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_survey %>%\n  specify(response = warm_fav,\n          explanatory = beach_or_mtns,\n          success = \"TRUE\") %>%\n  hypothesize(null = \"independence\") %>%\n  generate(reps = 500,\n           type = \"permute\") %>%\n  calculate(stat = \"diff in props\") %>%\n  visualize() +\n  shade_pvalue(obs_stat = obs_stat,  \n               direction = \"both\")  \n```\n\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-16-1.png){width=960}\n:::\n:::\n\n\n\n## Hypothesis Test Pipeline {auto-animate=\"true\"}\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_survey %>%\n  specify(response = warm_fav,\n          explanatory = beach_or_mtns,\n          success = \"TRUE\") %>%\n  hypothesize(null = \"independence\") %>%\n  generate(reps = 500,\n           type = \"permute\") %>%\n  calculate(stat = \"diff in props\") %>%\n  get_p_value(obs_stat = obs_stat,  \n               direction = \"both\")  \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n  p_value\n    <dbl>\n1       0\n```\n:::\n:::\n",
    "supporting": [
      "slides_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/countdown-0.4.0/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}