{
  "hash": "209f043493de8ec6d3b2c540d73cfd96",
  "result": {
    "markdown": "---\ntitle: \"Quantifying Numerical Associations\"\nformat: \n  stat20-slides-revealjs: default\n---\n\n\n## Agenda\n- Types of associations\n\n- Correlation and causation\n\n- Rank based measures of association\n\n- Correlations in the class survey\n\n\n## What is the Pearson correlation?\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_38ba2127\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n:::{.poll}\nWhat is the Pearson correlation between these two variables.\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-2-1.png){width=960}\n:::\n:::\n\n\n\n## What is the Pearson correlation?\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_c0105a2e\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n:::{.poll}\nWhat is the Pearson correlation between these two variables.\n:::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n\n\n## \n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-5-1.png){fig-align='center' width=768}\n:::\n:::\n\n\n:::{.poll}\nWhich **four** plots exhibit the strongest association (linear or non-linear)?\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_3e9b444f\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n:::{.notes}\nStudent will likely identify A, B, E, and F. F only appears to be highly associated because of the scaling of the y-axis. This is a good opportunity to review definition of association. The following slides demonstrate the effects of that scaling.\n:::\n\n## Pearson Correlation and Scale {auto-animate=true}\n\n\n::: {.cell}\n\n:::\n\n\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_f\n```\n:::\n\n:::\n\n::: {.column width=\"55%\"}\n\n:::\n\n::::\n\n## Pearson Correlation and Scale {auto-animate=true}\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_f\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n        x            y\n1   -8.00 -1.307007369\n2   -7.95 -0.466886973\n3   -7.90 -1.317638373\n4   -7.85  1.008059015\n5   -7.80  1.153714017\n6   -7.75  0.136000314\n7   -7.70  1.081268517\n8   -7.65  0.027234440\n9   -7.60 -0.755489564\n10  -7.55  0.643581028\n11  -7.50 -2.221816425\n12  -7.45 -0.352711462\n13  -7.40  0.788325702\n14  -7.35  0.348209977\n15  -7.30  0.888132692\n16  -7.25  1.494640228\n17  -7.20  0.539665177\n18  -7.15  1.534245783\n19  -7.10 -0.636288267\n20  -7.05  1.400750746\n21  -7.00  0.857266821\n22  -6.95  0.689240640\n23  -6.90 -0.578689332\n24  -6.85 -0.247484190\n25  -6.80 -1.616711187\n26  -6.75 -0.211921880\n27  -6.70 -1.389650022\n28  -6.65 -0.667030427\n29  -6.60  0.265923179\n30  -6.55  0.368512913\n31  -6.50  0.159370185\n32  -6.45 -0.803029578\n33  -6.40 -1.181853575\n34  -6.35  0.799141786\n35  -6.30 -0.119741600\n36  -6.25  1.055099362\n37  -6.20  0.260610303\n38  -6.15  1.215058556\n39  -6.10 -2.093776227\n40  -6.05 -0.340475843\n41  -6.00  1.098181964\n42  -5.95 -1.022920292\n43  -5.90  0.997308309\n44  -5.85  0.442282185\n45  -5.80  2.024841893\n46  -5.75 -0.206236931\n47  -5.70 -0.366921396\n48  -5.65 -0.540982671\n49  -5.60  0.326545855\n50  -5.55  1.185875818\n51  -5.50  0.163270582\n52  -5.45 -0.252746010\n53  -5.40 -0.538783647\n54  -5.35  0.239830058\n55  -5.30  0.227238979\n56  -5.25  0.146973095\n57  -5.20  1.206565164\n58  -5.15  0.274237725\n59  -5.10  0.291223416\n60  -5.05 -0.048435420\n61  -5.00 -0.160503335\n62  -4.95  0.982662625\n63  -4.90 -0.009812706\n64  -4.85 -1.236449694\n65  -4.80 -0.220086594\n66  -4.75  0.916450245\n67  -4.70  0.312158589\n68  -4.65 -0.271222289\n69  -4.60 -0.362834150\n70  -4.55  0.690127669\n71  -4.50  0.954579372\n72  -4.45 -1.002334741\n73  -4.40 -0.827510811\n74  -4.35 -0.481050964\n75  -4.30  0.213284850\n76  -4.25  0.694018655\n77  -4.20  0.318705891\n78  -4.15  1.359291786\n79  -4.10  0.299499214\n80  -4.05 -0.136853535\n81  -4.00 -0.907524278\n82  -3.95  0.580039124\n83  -3.90 -0.451761432\n84  -3.85 -0.637651429\n85  -3.80 -0.377287558\n86  -3.75 -0.108975033\n87  -3.70  0.266174878\n88  -3.65  1.950537958\n89  -3.60  2.481797153\n90  -3.55  0.024020307\n91  -3.50 -0.271974465\n92  -3.45 -0.324420253\n93  -3.40  0.914990966\n94  -3.35 -0.177070403\n95  -3.30  1.668125591\n96  -3.25 -0.196626395\n97  -3.20  0.909735944\n98  -3.15  0.379802619\n99  -3.10 -0.717674077\n100 -3.05 -0.137978296\n101 -3.00 -0.032596143\n102 -2.95 -1.151078285\n103 -2.90 -0.035147120\n104 -2.85  1.289653594\n105 -2.80  1.301664628\n106 -2.75 -1.314453018\n107 -2.70  0.279983464\n108 -2.65 -0.134496134\n109 -2.60 -0.993968666\n110 -2.55 -1.125493956\n111 -2.50 -0.585075814\n112 -2.45 -0.360440229\n113 -2.40 -0.128946258\n114 -2.35 -1.763949074\n115 -2.30  0.249921212\n116 -2.25  1.356315758\n117 -2.20 -0.221241869\n118 -2.15 -0.255945298\n119 -2.10  0.764032808\n120 -2.05 -0.429023148\n121 -2.00 -0.506416626\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"55%\"}\n\n:::\n\n::::\n\n## Pearson Correlation and Scale {auto-animate=true}\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_f %>%\n    ggplot(aes(x = x,\n               y = y)) +\n    geom_point() +\n    ylim(-9, 9) +\n    theme_bw()\n```\n:::\n\n:::\n\n::: {.column width=\"55%\"}\n\n:::\n\n::::\n\n## Pearson Correlation and Scale {auto-animate=true}\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_f %>%\n    ggplot(aes(x = x,\n               y = y)) +\n    geom_point() +\n    ylim(-9, 9) +\n    theme_bw()\n```\n:::\n\n:::\n\n::: {.column width=\"55%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-12-1.png){width=960}\n:::\n:::\n\n:::\n\n::::\n\n## Pearson Correlation and Scale {auto-animate=true}\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_f %>%\n    ggplot(aes(x = x,\n               y = y)) +\n    geom_point() +\n    theme_bw()\n```\n:::\n\n:::\n\n::: {.column width=\"55%\"}\n\n:::\n\n::::\n\n## Pearson Correlation and Scale {auto-animate=true}\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_f %>%\n    ggplot(aes(x = x,\n               y = y)) +\n    geom_point() +\n    theme_bw()\n```\n:::\n\n:::\n\n::: {.column width=\"55%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-15-1.png){width=960}\n:::\n:::\n\n:::\n\n::::\n\n## Pearson Correlation and Scale {auto-animate=true}\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_f %>%\n    summarize(pearson = cor(x, y))\n```\n:::\n\n\n\n## Pearson Correlation and Scale {auto-animate=true}\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_f %>%\n    summarize(pearson = cor(x, y))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      pearson\n1 -0.03106456\n```\n:::\n:::\n\n\n\n\n## Is there an association between these variables?\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_0fe37aee\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n:::{.poll}\nBased on this plot, do you see evidence of an association between these two variables?\n:::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-19-1.png){width=960}\n:::\n:::\n\n\n\n\n\n## Where might you see a U-shaped association?\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_257c967d\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">04</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-21-1.png){width=960}\n:::\n:::\n\n\n\n:::{.poll}\nGroup discussion: Give examples in real life where you might expect to see this kind of U-shaped association? What about an inverted U shaped association?\n:::\n\n\n\n# Causation and correlation\n\n\n## Does correlation imply causation?\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_be89f069\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n:::{.poll}\nDoes a strong measure of association imply that one variable causes another?\n:::\n\n\n\n\n## Does causation imply correlation?\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_f921e839\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n:::{.poll}\nDoes a casual relationship between two variables imply there is a correlation?\n:::\n\n\n:::{.notes}\nSome \"counter-examples\" could include\n\n- the causal variable has a small effect compared to other variables (e.g. a drug might have a small effect on a disease, but the patient's co-morbidities might have a much larger effect). \n\n- the relationship is non-linear e.g. U shaped so Pearson correlation would not really pick it up\n:::\n\n## Correlation and causation IRL\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_90a95c97\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">05</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n\n:::{.poll}\nIn groups come up with examples of two variables that\n\n1. One causes the other and they are strongly correlated\n\n2. One causes the other and they are weakly correlated\n\n3. No direct causal relationship and they are strongly correlated\n\n4. No direct causal relationship and they are weakly correlated\n:::\n\n\n\n\n# Rank based methods of association\n\n## Pearson correlation\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-25-1.png){width=960}\n:::\n:::\n\n\n\n## Pearson correlation\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>%  \n    summarise(pearson=cor(flipper_length_mm, body_mass_g,\n                          use='complete.obs'))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n  pearson\n    <dbl>\n1   0.871\n```\n:::\n:::\n\n\n\n:::{.notes}\nEmphasize the use='complete.obs' handles the NaNs, which is different than na.rm in mean().\n:::\n\n\n## Spearman correlation\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>%  \n    summarise(spearman=cor(flipper_length_mm, body_mass_g,\n                           method='spearman', use='complete.obs'))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n  spearman\n     <dbl>\n1    0.840\n```\n:::\n:::\n\n\n\n## Rank transformation\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvalues <- c(2.6, 1.2, 3.9)\nrank(values)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 2 1 3\n```\n:::\n:::\n\n\n\n## Rank transformation\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-29-1.png){width=960}\n:::\n:::\n\n\n\n## Rank transformation\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-30-1.png){width=960}\n:::\n:::\n\n\n\n## Rank transformation\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-31-1.png){width=960}\n:::\n:::\n\n\n\n## Spearman correlation by dplyr\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_2f500dd1\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">04</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n\n:::{.poll}\nCalculate the spearman correlation between `flipper_length_mm` and `body_mass_g` without the `cor` function.\n:::\n\n\n## Spearman and robustness\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-33-1.png){width=960}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 2\n  pearson spearman\n    <dbl>    <dbl>\n1   0.871    0.840\n```\n:::\n:::\n\n\n\n\n## Spearman and robustness\n\n::: {.cell}\n::: {.cell-output-display}\n![](slides_files/figure-revealjs/unnamed-chunk-35-1.png){width=960}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 2\n  pearson spearman\n    <dbl>    <dbl>\n1   0.564    0.824\n```\n:::\n:::\n\n\n## Finding correlations in the class survey data\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_1f57e512\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n:::{.poll}\nIn groups, answer the questions in the handout about the class survey data.\n:::",
    "supporting": [
      "slides_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"slides_files/libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"slides_files/libs/countdown-0.4.0/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}