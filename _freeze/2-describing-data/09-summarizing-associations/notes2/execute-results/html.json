{
  "hash": "6744554c6c01ce01a5c32471ad4be52f",
  "result": {
    "markdown": "---\ntitle: \"Summarizing numerical associations\"\nsubtitle: \"Correllation and the least squares line\"\ndate: 02/15/23\nfrom: markdown+emoji\n---\n<!-- The bit before that is commented out adds publish date to document metadata and button links at the top of the doc. This workflow can be revisited but currently doesn't work because listings aren't updated with these dates, only the renderd docs. -->\n\n::: {.cell}\n\n:::\n\n\n\n[[Discuss]{.btn .btn-primary}](https://edstem.org/us/courses/31657) [[Reading Questions]{.btn .btn-primary}](https://www.gradescope.com/courses/477232) [[PDF]{.btn .btn-primary}](notes.pdf)\n\n\n\n\\\n\n[W]{.dropcap}hich of the following plots do you think depicts the relationship between the high school graduation rate and the poverty rate among the 50 US states?\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\npoverty <- read_delim(\"https://www.dropbox.com/s/0z45xgms0sie7l9/poverty.csv?dl=1\")\n\npoverty <- poverty %>%\n  mutate(group = case_when(\n    Poverty < 9 ~ \"low\",\n    Poverty >= 9 & Poverty <= 13 ~ \"med\",\n    Poverty > 13 ~ \"hi\"\n  )) \n\npA <- ggplot(poverty, aes(x = Poverty, \n                    y = Graduates)) +\n  geom_point() +\n  labs(x = \"Poverty Rate\",\n       y = \"Graduation Rate\") +\n  theme_bw()\n\nset.seed(50)\npoverty_shuffled <- poverty\npoverty_shuffled$Graduates <- sample(poverty$Graduates)\n\npB <- ggplot(poverty_shuffled, aes(x = Poverty, \n                    y = Graduates)) +\n  geom_point() +\n  labs(x = \"Poverty Rate\",\n       y = \"Graduation Rate\") +\n  theme_bw()\n\nlibrary(patchwork)\npA + pB\n```\n\n::: {.cell-output-display}\n![](notes2_files/figure-html/unnamed-chunk-3-1.png){fig-align='center' width=595.2}\n:::\n:::\n\n\nIf you guessed the plot on the left, you are correct :tada:.\n\nStates with higher poverty rates tend to have lower graduation rates. This is a prime example of two variables that are *associated*. In a previous set of notes we defined association between two categorical variables, but lets replace that with a more general definition that can apply here.\n\n**Association**\n:    There is an association between two variables if the conditional distribution of one varies as you move across values of the other.\n\nYou can detect associations in scatter plots by scanning from left to right along the x-axis and determining whether or not the conditional distribution of the y-variable is changing or not. In the figure to the left below, when you look first to the states with low poverty rates (in the blue box), you find that the conditional distribution of the graduation rate (represented by the blue density curve along the right side of the scatter plot) is high: most of those states have graduation rates between 85% and 90%. When you scan to the right in that scatter plot, and condition on having a high poverty rate (the states in the red box), the conditional distribution shifts downwards. Those states have graduations rates in the low 80%s.\n\n:::{.column-margin}\nThese density curves are conditional distribution because we've set a condition on the data we're visualizing. When focusing on the data that's in the blue box, for example, we've in effect set up a filter where Poverty < 9.\n:::\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Prepare plot on the left\npoverty_2 <- poverty %>%\n  filter(group != \"med\")\n\np_real_densities <-  poverty_2 %>%\n  ggplot(aes(y = Graduates, fill = group)) +\n  geom_density(alpha = .5) +\n  theme_void() + \n  theme(legend.position = \"none\") +\n  lims(y = c(77, 92.5))\n\np_real_scatter <- poverty %>%\n  ggplot(aes(x = Poverty, \n             y = Graduates)) +\n  annotate(\"rect\", xmin = 5, xmax = 9,\n           ymin = 77, ymax = 92.5, alpha = .35,\n           color = \"#00BFC4\", fill = NA) +\n  annotate(\"rect\", xmin = 13, xmax = 18,\n           ymin = 77, ymax = 92.5, alpha = .35,\n           color = \"#F8766D\", fill = NA) +\n  geom_point() +\n  geom_rug(data = poverty_2,\n           aes(color = group), \n           alpha = .8, sides = \"r\") +\n  theme_bw() +\n  theme(legend.position = \"none\")\n\n# Prepare plot on the right\npoverty_shuffled_2 <- poverty_shuffled %>%\n  filter(group != \"med\")\n\np_shuf_densities <-  poverty_shuffled_2 %>%\n  ggplot(aes(y = Graduates, fill = group)) +\n  geom_density(alpha = .5) +\n  theme_void() + \n  theme(legend.position = \"none\") +\n  lims(y = c(77, 92.5))\n\np_shuf_scatter <- poverty_shuffled_2 %>%\n  ggplot(aes(x = Poverty, \n             y = Graduates)) +\n  annotate(\"rect\", xmin = 5, xmax = 9,\n           ymin = 77, ymax = 92.5, alpha = .35,\n           color = \"#00BFC4\", fill = NA) +\n  annotate(\"rect\", xmin = 13, xmax = 18,\n           ymin = 77, ymax = 92.5, alpha = .35,\n           color = \"#F8766D\", fill = NA) +\n  geom_point() +\n  geom_rug(data = poverty_shuffled_2,\n           aes(color = group), \n           alpha = .8, sides = \"r\") +\n  theme_bw() +\n  theme(legend.position = \"none\")\n\np_real_scatter + p_real_densities + \n  p_shuf_scatter + p_shuf_densities + \n  plot_layout(widths = c(4, 1, 4, 1))\n```\n\n::: {.cell-output-display}\n![](notes2_files/figure-html/unnamed-chunk-4-1.png){fig-align='center' width=720}\n:::\n:::\n\n\nThe plot on the right, by contrast, exhibits no association between poverty rate and graduation rate. When we compare the low poverty states with the high poverty states, their conditional distributions of Graduation rate are essentially the same.\n",
    "supporting": [
      "notes2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}